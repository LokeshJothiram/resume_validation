<!-- Responsive Header -->
<div id="fixed-header" class="fixed top-0 left-0 w-full z-50 bg-white shadow min-h-[55px] h-auto">
  <div class="flex items-center justify-between w-full py-2 px-2 sm:px-4 md:px-6 flex-wrap sm:flex-nowrap">
    <!-- Logo and Hamburger -->
    <div class="flex items-center gap-2 sm:gap-4">
      <span class="flex items-center font-bold text-xl sm:text-2xl">
        <span style="display:inline-block;width:20px;height:16px;position:relative;margin-right:6px;">
          <span style="display:block;width:100%;height:100%;background:linear-gradient(90deg, #2563eb 0%, #a21caf 100%);clip-path:polygon(0 0, 80% 0, 100% 25%, 80% 50%, 100% 75%, 80% 100%, 0 100%);border-radius:2px;"></span>
        </span>
        <span class="header-gradient">TalentEdge AI</span>
      </span>
      <!-- Hamburger for mobile -->
      <button id="mobile-menu-btn" class="sm:hidden ml-2 p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
    <!-- Navigation Tabs Center (hidden on mobile) -->
    <div id="nav-tabs" class="hidden sm:flex gap-2 md:gap-4 ml-1 sm:ml-4 md:ml-8 overflow-x-auto max-w-full">
      <button id="tab-dashboard" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg whitespace-nowrap">Dashboard</button>
      {% if session.role == 'admin' %}
        <button id="tab-analytics" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Analytics</button>
        <button id="tab-activity-logs" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Activity Logs</button>
        <button id="tab-user-management" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">User Management</button>
        <button id="tab-job-requirement-upload" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Job Requirements</button>
        <button id="tab-question-gen" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Interview Question Generator</button>
      {% endif %}
      {% if session.role != 'admin' %}
        <button id="tab-resume" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Resume Match</button>
        <button id="tab-saved" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Saved Analyses</button>
        <button id="tab-shortlisted" type="button" class="tab-btn px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Shortlisted Resumes</button>
      {% endif %}
    </div>
    <!-- Profile & Logout Right -->
    <div class="relative flex items-center gap-2 sm:gap-2">
      <button id="notification-btn" type="button" class="flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-gray-100 focus:outline-none border-none shadow-none">
        <i data-lucide="bell" class="w-4 h-4 sm:w-5 h-5 text-gray-700"></i>
      </button>
      <div id="profile-container" class="flex items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100 transition" onclick="toggleProfileDropdown()">
        <div id="profile-avatar" class="w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-white font-bold text-base" style="background: linear-gradient(135deg, #7f5af0 0%, #00c6fb 100%);">
          {% if session.user %}
            {{ session.user.split(' ')[0][0]|upper }}{% if session.user.split(' ')|length > 1 %}{{ session.user.split(' ')[1][0]|upper }}{% endif %}
          {% else %}
            U
          {% endif %}
        </div>
        <div class="flex flex-col items-start justify-center">
          <span class="font-semibold text-base text-gray-900">{% if session.user %}{{ session.user }}{% else %}User{% endif %}</span>
          <span class="text-xs text-gray-400">{% if session.role %}{{ session.role|capitalize }}{% else %}Role{% endif %}</span>
        </div>
        <svg class="w-4 h-4 text-gray-400 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
      </div>
      <!-- Profile Dropdown (hidden by default) -->
      <div id="profile-dropdown" class="absolute right-0 mt-24 w-36 sm:w-40 bg-white border border-gray-200 rounded-lg shadow-lg py-2 hidden z-50">
        <form action="{{ url_for('logout') }}" method="post">
          <button type="submit" id="logout" class="logout-btn w-full text-left px-4 py-2 flex items-center gap-2">
            <i data-lucide="log-out" class="inline w-4 h-4 align-text-bottom"></i> Logout
          </button>
        </form>
      </div>
    </div>
  </div>
  <!-- Mobile nav menu -->
  <div id="mobile-nav" class="sm:hidden fixed top-14 left-0 w-full bg-white shadow-lg z-40 hidden flex-col gap-1 p-2">
    <button id="tab-dashboard-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg whitespace-nowrap">Dashboard</button>
    {% if session.role == 'admin' %}
      <button id="tab-analytics-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Analytics</button>
      <button id="tab-activity-logs-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Activity Logs</button>
      <button id="tab-user-management-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">User Management</button>
      <button id="tab-job-requirement-upload-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Job Requirements</button>
      <button id="tab-question-gen-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Interview Question Generator</button>
    {% endif %}
    {% if session.role != 'admin' %}
      <button id="tab-resume-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Resume Match</button>
      <button id="tab-saved-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Saved Analyses</button>
      <button id="tab-shortlisted-m" type="button" class="tab-btn w-full text-left px-3 py-2 text-xs font-medium text-gray-600 bg-white focus:outline-none hover:bg-blue-50 rounded-lg">Shortlisted Resumes</button>
    {% endif %}
  </div>
</div>
<script>
function toggleProfileDropdown() {
  const dropdown = document.getElementById('profile-dropdown');
  dropdown.classList.toggle('hidden');
  // Close on outside click
  function handler(e) {
    if (!document.getElementById('profile-container').contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.classList.add('hidden');
      document.removeEventListener('click', handler);
    }
  }
  setTimeout(() => {
    document.addEventListener('click', handler);
  }, 0);
}
</script> 