<div class="w-full">
  <div class="mb-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Upload Interview Audio -->
      <div class="bg-green-50 border border-green-100 rounded-xl p-6 shadow-sm flex-1">
        <div class="flex items-center mb-2">
          <i data-lucide="mic" class="w-6 h-6 text-green-400 mr-2"></i>
          <span class="text-xl font-bold text-gray-800">Upload Interview Audio</span>
        </div>
        <div class="text-sm text-green-400 mb-4">Upload audio file for analysis</div>
        <!-- <label for="audio" class="block text-sm font-medium text-gray-700 mb-1">Upload Interview Audio</label> -->
        <div class="flex items-center gap-2 mb-2">
          <label class="custom-file-upload">
            <i data-lucide="mic"></i>
            <span>Choose File</span>
            <input type="file" id="audio" name="audio" accept=".mp3,.mp4,.wav" onchange="document.getElementById('audioFileName').textContent = this.files[0]?.name || 'No file chosen'">
          </label>
          <span class="file-name" id="audioFileName">No file chosen</span>
        </div>
        <p id="audio_error" class="text-red-500 text-xs mt-1 hidden">Audio file is required.</p>
      </div>
      <!-- Upload Resume -->
      <div class="bg-blue-50 border border-blue-100 rounded-xl p-6 shadow-sm flex-1">
        <div class="flex items-center mb-2">
          <i data-lucide="upload" class="w-6 h-6 text-blue-400 mr-2"></i>
          <span class="text-xl font-bold text-gray-800">Upload Resume (PDF/DOCX)</span>
        </div>
        <div class="text-sm text-blue-400 mb-4">Upload candidate resume</div>
        <!-- <label for="tech_resume" class="block text-sm font-medium text-gray-700 mb-1">Upload Resume (PDF/DOCX)</label> -->
        <div class="flex items-center gap-2 mb-2">
          <label class="custom-file-upload">
            <i data-lucide="file-text"></i>
            <span>Choose File</span>
            <input type="file" id="tech_resume" name="tech_resume" accept=".pdf,.docx" onchange="document.getElementById('techResumeFileName').textContent = this.files[0]?.name || 'No file chosen'">
          </label>
          <span class="file-name" id="techResumeFileName">No file chosen</span>
        </div>
        <p id="tech_resume_error" class="text-red-500 text-xs mt-1 hidden">Resume file is required.</p>
      </div>
      <!-- Upload Technology Questions -->
      <div class="bg-purple-50 border border-purple-100 rounded-xl p-6 shadow-sm flex-1">
        <div class="flex items-center mb-2">
          <i data-lucide="code" class="w-6 h-6 text-purple-400 mr-2"></i>
          <span class="text-xl font-bold text-gray-800">Upload Technology Questions (.docx,.txt)</span>
        </div>
        <div class="text-sm text-purple-400 mb-4">Upload technical questions file</div>
        <!-- <label for="techQuestionsUpload" class="block text-sm font-medium text-gray-700 mb-1">Upload Technology Questions (.docx,.txt)</label> -->
        <div class="flex items-center gap-2 mb-2">
          <label class="custom-file-upload">
            <i data-lucide="code"></i>
            <span>Choose File</span>
            <input type="file" id="techQuestionsUpload" accept=".docx,.txt" onchange="handleTechQuestionsUpload(this)">
          </label>
          <span class="file-name" id="techQuestionsUploadName">No file chosen</span>
        </div>
        <input type="hidden" id="tech_questions" name="tech_questions">
      </div>
      <!-- Primary Technology -->
      <div class="bg-yellow-50 border border-yellow-100 rounded-xl p-6 shadow-sm flex-1">
        <div class="flex items-center mb-2">
          <i data-lucide="cpu" class="w-6 h-6 text-yellow-400 mr-2"></i>
          <span class="text-xl font-bold text-gray-800">Primary Technology</span>
        </div>
        <div class="text-sm text-yellow-400 mb-4">Select the primary technology</div>
        <!-- <label for="technology" class="block text-sm font-medium text-gray-700 mb-1">Primary Technology</label> -->
        <select id="technology" name="technology" class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
          <option value="">Select Technology</option>
          <option value="General">General</option>
          <option value="Python">Python</option>
          <option value="Java">Java</option>
          <option value="JavaScript">JavaScript</option>
          <option value="Dotnet">Dotnet</option>
          <option value="Machine Learning">Machine Learning</option>
          <option value="DevOps">DevOps</option>
        </select>
        <p id="technology_error" class="text-red-500 text-xs mt-1 hidden">Technology is required.</p>
      </div>
    </div>
    <button type="submit" class="mx-auto block mt-8 bg-blue-600 text-white font-semibold py-2 px-6 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 text-base flex items-center justify-center w-auto min-w-[160px]">
      <i data-lucide="search" class="inline w-5 h-5 mr-2 align-text-bottom"></i>Analyze Candidate
    </button>
  </div>
</div>

<script>
function handleTechQuestionsUpload(input) {
  const span = document.getElementById('techQuestionsUploadName');
  if (input.files && input.files.length > 0) {
    span.textContent = input.files[0].name;
    const file = input.files[0];
    if (file.name.endsWith('.docx')) {
      const reader = new FileReader();
      reader.onload = function(event) {
        mammoth.extractRawText({arrayBuffer: event.target.result})
          .then(function(result) {
            document.getElementById('tech_questions').value = result.value;
          })
          .catch(function(err) {
            alert('Could not read the Word file.');
          });
      };
      reader.readAsArrayBuffer(file);
    } else if (file.name.endsWith('.txt')) {
      const reader = new FileReader();
      reader.onload = function(event) {
        document.getElementById('tech_questions').value = event.target.result;
      };
      reader.readAsText(file);
    } else {
      alert('Only .docx or .txt files are supported.');
      input.value = '';
      span.textContent = 'No file chosen';
    }
  } else {
    span.textContent = 'No file chosen';
    document.getElementById('tech_questions').value = '';
  }
}
</script> 