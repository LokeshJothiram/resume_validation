<div class="flex flex-col gap-6">
  <!-- Input Section: Two-column card layout -->
  <div class="flex flex-col md:flex-row gap-6">
    <!-- Left Card: Upload or Paste Job Description -->
    <div class="flex-1 bg-yellow-50 border border-yellow-100 rounded-xl p-6 shadow-sm">
      <div class="mb-2 flex items-center">
        <i data-lucide="file-text" class="inline w-5 h-5 mr-2 text-yellow-400"></i>
        <span class="text-lg font-bold text-gray-800">Upload or Paste Job Description</span>
      </div>
      <div class="text-sm text-yellow-400 mb-4">Provide job requirements for question generation</div>
      <label for="question_gen_jd_upload" class="block text-sm font-medium text-gray-700 mb-1">Upload or Paste Job Description</label>
      <div class="flex items-center gap-2 mb-2">
        <label class="relative cursor-pointer bg-white border border-gray-300 rounded px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-yellow-100 transition" tabindex="0">
          Choose File
          <input type="file" id="question_gen_jd_upload" accept=".docx" class="absolute left-0 top-0 w-full h-full opacity-0 cursor-pointer" onchange="document.getElementById('questionGenJdUploadName').textContent = this.files[0]?.name || 'No file chosen'">
        </label>
        <span class="text-sm text-gray-500" id="questionGenJdUploadName">No file chosen</span>
      </div>
      <textarea id="question_gen_jd" class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500" rows="3" placeholder="Paste job description here"></textarea>
      <p id="question_gen_jd_error" class="text-red-500 text-xs mt-1 hidden">Job Description is required.</p>
    </div>
    <!-- Right Card: Number of Questions and Generate Button -->
    <div class="flex-1 bg-cyan-50 border border-cyan-100 rounded-xl p-6 shadow-sm flex flex-col justify-between min-h-[300px]">
      <div>
        <div class="mb-2 flex items-center">
          <i data-lucide="hash" class="inline w-5 h-5 mr-2 text-cyan-400"></i>
          <span class="text-lg font-bold text-gray-800">Number of Questions</span>
        </div>
        <div class="text-sm text-cyan-400 mb-4">Specify how many questions to generate</div>
        <label for="num_questions" class="block text-sm font-medium text-gray-700 mb-1"># Number of Questions</label>
        <input type="number" id="num_questions" name="num_questions" min="1" max="20" value="5" class="w-24 text-center border border-gray-300 rounded-md shadow-sm focus:ring-cyan-500 focus:border-cyan-500 text-base font-semibold" style="appearance: textfield;">
        <p id="num_questions_error" class="text-red-500 text-xs mt-1 hidden">Please enter a number between 1 and 20.</p>
        <!-- Level Option -->
        <div class="mt-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Level</label>
          <div class="flex gap-6">
            <label class="inline-flex items-center cursor-pointer">
              <input type="radio" name="question_level" id="level_easy" value="easy" class="form-radio text-cyan-600" checked>
              <span class="ml-2 text-gray-700">Easy</span>
            </label>
            <label class="inline-flex items-center cursor-pointer">
              <input type="radio" name="question_level" id="level_medium" value="medium" class="form-radio text-cyan-600">
              <span class="ml-2 text-gray-700">Medium</span>
            </label>
            <label class="inline-flex items-center cursor-pointer">
              <input type="radio" name="question_level" id="level_hard" value="hard" class="form-radio text-cyan-600">
              <span class="ml-2 text-gray-700">Hard</span>
            </label>
          </div>
        </div>
      </div>
      <button id="generate-questions-btn" type="button" style="background: #10b981 !important; color: #fff !important; opacity: 1 !important; display: block !important; font-weight: bold !important;" class="mt-4 rounded-full transition-transform transform hover:scale-105">
        <i data-lucide="wand-2" class="inline w-4 h-4 mr-1 align-text-bottom"></i>Generate Questions
      </button>
    </div>
  </div>
  <!-- Generated Questions Section -->
  <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm mt-2">
    <div id="question-gen-result" class="hidden">
      <div class="flex justify-between items-center mb-2">
        <span class="font-bold text-lg text-gray-800">Generated Questions</span>
        <div>
          <button id="copy-questions-btn" class="text-blue-600 hover:text-blue-800 font-semibold text-sm mr-2"><i data-lucide="copy" class="inline w-4 h-4 mr-1 align-text-bottom"></i>Copy</button>
          <button id="download-questions-btn" class="text-green-600 hover:text-green-800 font-semibold text-sm"><i data-lucide="download" class="inline w-4 h-4 mr-1 align-text-bottom"></i>Download</button>
        </div>
      </div>
      <div id="question-gen-list" class="bg-gray-50 rounded p-4 text-gray-800 text-sm whitespace-pre-line break-words"></div>
    </div>
    <div id="question-gen-loader" class="text-center hidden mt-4">
      <svg aria-hidden="true" class="inline w-8 h-8 text-cyan-400 animate-spin" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" stroke="#06B6D4" stroke-width="10" fill="none" opacity="0.2"/>
        <path d="M50 15a35 35 0 1 1-24.75 10.25" stroke="#0891B2" stroke-width="10" stroke-linecap="round" fill="none"/>
      </svg>
      <span class="ml-2 text-cyan-600 font-semibold animate-pulse">Generating questions...</span>
    </div>
    <div id="question-gen-placeholder" class="text-gray-400 text-center py-12">No questions generated yet. Please upload job description and click Generate Questions.</div>
  </div>
</div>
<script>
// Hide placeholder when questions are generated or loading
const questionGenResult = document.getElementById('question-gen-result');
const questionGenPlaceholder = document.getElementById('question-gen-placeholder');
const questionGenLoader = document.getElementById('question-gen-loader');
const listDiv = document.getElementById('question-gen-list');
if (questionGenResult && questionGenPlaceholder && questionGenLoader) {
  const observer = new MutationObserver(() => {
    if ((questionGenResult && !questionGenResult.classList.contains('hidden')) || (questionGenLoader && !questionGenLoader.classList.contains('hidden'))) {
      if (questionGenPlaceholder) questionGenPlaceholder.classList.add('hidden');
    } else {
      if (questionGenPlaceholder) questionGenPlaceholder.classList.remove('hidden');
      listDiv.textContent = '';
    }
  });
  observer.observe(questionGenResult, { attributes: true, attributeFilter: ['class'] });
  observer.observe(questionGenLoader, { attributes: true, attributeFilter: ['class'] });
}
// Update textarea with file content as before
if (document.getElementById('question_gen_jd_upload')) {
  document.getElementById('question_gen_jd_upload').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file && file.name.endsWith('.docx')) {
      const reader = new FileReader();
      reader.onload = function(event) {
        mammoth.extractRawText({arrayBuffer: event.target.result})
          .then(function(result) {
            document.getElementById('question_gen_jd').value = result.value;
            document.getElementById('question_gen_jd_error').classList.add('hidden');
          })
          .catch(function(err) {
            alert('Could not read the Word file.');
          });
      };
      reader.readAsArrayBuffer(file);
    } else if (file) {
      alert('Only .docx files are supported.');
      e.target.value = '';
    }
    // Update file name display
    document.getElementById('questionGenJdUploadName').textContent = file ? file.name : 'No file chosen';
  });
}
</script> 